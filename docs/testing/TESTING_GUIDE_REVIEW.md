# ğŸ“‹ æµ‹è¯•æŒ‡å—å®¡æŸ¥æŠ¥å‘Š

> **å®¡æŸ¥æ—¥æœŸ**: 2026-02-06  
> **å®¡æŸ¥èŒƒå›´**: TESTING_GUIDE.md, HOW_TO_TEST.md, quick-verify.sh

---

## âœ… å·²ä¿®æ­£çš„é—®é¢˜

### 1. ç«¯å£è¯´æ˜ä¸æ¸…æ™° âœ…

**é—®é¢˜**: æµ‹è¯•æŒ‡å—ä¸­æœªæ˜ç¡®è¯´æ˜ä¸åŒç¯å¢ƒä½¿ç”¨çš„ç«¯å£

**ä¿®æ­£**:
- âœ… åœ¨ `TESTING_GUIDE.md` ä¸­æ·»åŠ äº†ç«¯å£è¯´æ˜éƒ¨åˆ†
- âœ… æ˜ç¡®åŒºåˆ†ï¼š
  - Docker/ç”Ÿäº§ç¯å¢ƒ: `8081`
  - å¼€å‘æ¨¡å¼: `3000`
  - E2E æµ‹è¯•: `3000`ï¼ˆå¯é€šè¿‡ `BASE_URL` ç¯å¢ƒå˜é‡ä¿®æ”¹ï¼‰

### 2. å¿«é€Ÿå¼€å§‹éƒ¨åˆ†è¡¥å…… âœ…

**ä¿®æ­£**:
- âœ… æ·»åŠ äº†ç«¯å£è¯´æ˜è­¦å‘Šæ¡†
- âœ… è¯´æ˜äº†æµ‹è¯•è„šæœ¬çš„é»˜è®¤ç«¯å£é…ç½®
- âœ… æ·»åŠ äº†ç¯å¢ƒå˜é‡è¦†ç›–è¯´æ˜

---

## âœ… éªŒè¯æ­£ç¡®çš„éƒ¨åˆ†

### 1. å®¹å™¨åç§° âœ…

æ‰€æœ‰å®¹å™¨åç§°ä¸å®é™…é¡¹ç›®åŒ¹é…ï¼š
- âœ… `pis-postgres` - PostgreSQL å®¹å™¨
- âœ… `pis-redis` - Redis å®¹å™¨
- âœ… `pis-minio` - MinIO å®¹å™¨
- âœ… `pis-web` - Web å®¹å™¨ï¼ˆå¦‚å­˜åœ¨ï¼‰
- âœ… `pis-worker` - Worker å®¹å™¨ï¼ˆå¦‚å­˜åœ¨ï¼‰

### 2. æµ‹è¯•è„šæœ¬è·¯å¾„ âœ…

æ‰€æœ‰æµ‹è¯•è„šæœ¬è·¯å¾„æ­£ç¡®ï¼š
- âœ… `scripts/test/comprehensive-test.sh`
- âœ… `scripts/test/test-all.sh`
- âœ… `scripts/test/test-full-features.sh`
- âœ… `scripts/test/quick-verify.sh`
- âœ… `scripts/test/test-business-logic.sh`
- âœ… `scripts/test/test-api-endpoints.sh`
- âœ… `scripts/test/test-login-flow.sh`

### 3. å‘½ä»¤æ­£ç¡®æ€§ âœ…

æ‰€æœ‰å‘½ä»¤å·²éªŒè¯ï¼š
- âœ… `pnpm test:quick` - å·²æ·»åŠ åˆ° package.json
- âœ… `pnpm init-users` - å·²æ·»åŠ åˆ° package.json
- âœ… `pnpm test:e2e:ui` - Playwright UI æ¨¡å¼
- âœ… `bash scripts/test/*.sh` - æ‰€æœ‰è„šæœ¬è·¯å¾„æ­£ç¡®

### 4. æ•°æ®åº“å‘½ä»¤ âœ…

æ‰€æœ‰æ•°æ®åº“ç›¸å…³å‘½ä»¤æ­£ç¡®ï¼š
- âœ… `docker exec pis-postgres psql -U pis -d pis -c "SELECT 1;"`
- âœ… ç”¨æˆ·æŸ¥è¯¢å‘½ä»¤æ­£ç¡®
- âœ… è¡¨ç»“æ„æ£€æŸ¥å‘½ä»¤æ­£ç¡®

### 5. API ç«¯ç‚¹ âœ…

æ‰€æœ‰ API ç«¯ç‚¹è·¯å¾„æ­£ç¡®ï¼š
- âœ… `/api/health` - å¥åº·æ£€æŸ¥
- âœ… `/api/worker/health` - Worker å¥åº·æ£€æŸ¥
- âœ… `/api/auth/check-admin-status` - ç®¡ç†å‘˜çŠ¶æ€
- âœ… `/api/auth/login` - ç™»å½•ç«¯ç‚¹
- âœ… `/api/public/albums/*` - å…¬å¼€ç›¸å†Œç«¯ç‚¹
- âœ… `/api/admin/*` - ç®¡ç†ç«¯ç‚¹

---

## ğŸ“ å»ºè®®è¡¥å……çš„å†…å®¹

### 1. ç¯å¢ƒå˜é‡è¯´æ˜

å»ºè®®åœ¨æµ‹è¯•æŒ‡å—ä¸­æ·»åŠ ç¯å¢ƒå˜é‡è¯´æ˜ï¼š

```bash
# è‡ªå®šä¹‰æµ‹è¯• URL
export BASE_URL=http://localhost:8081
pnpm test:quick

# æˆ–å¼€å‘ç¯å¢ƒ
export BASE_URL=http://localhost:3000
pnpm test:e2e
```

### 2. æµ‹è¯•å‰ç½®æ¡ä»¶æ£€æŸ¥

å»ºè®®æ·»åŠ æ›´è¯¦ç»†çš„å‰ç½®æ¡ä»¶æ£€æŸ¥ï¼š

```bash
# æ£€æŸ¥ Docker æ˜¯å¦è¿è¡Œ
docker ps > /dev/null 2>&1 || echo "Docker æœªè¿è¡Œ"

# æ£€æŸ¥å®¹å™¨æ˜¯å¦å¯åŠ¨
docker ps | grep pis-postgres || echo "PostgreSQL å®¹å™¨æœªå¯åŠ¨"
```

### 3. æµ‹è¯•æ•°æ®æ¸…ç†

å»ºè®®æ·»åŠ æµ‹è¯•æ•°æ®æ¸…ç†è¯´æ˜ï¼š

```bash
# æ¸…ç†æµ‹è¯•æ•°æ®ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
docker exec pis-postgres psql -U pis -d pis -c \
  "DELETE FROM photos WHERE created_at < NOW() - INTERVAL '1 day';"
```

---

## ğŸ¯ æµ‹è¯•æŒ‡å—å®Œæ•´æ€§æ£€æŸ¥

### æ–‡æ¡£ç»“æ„ âœ…

- âœ… ç›®å½•ç»“æ„æ¸…æ™°
- âœ… ç« èŠ‚åˆ’åˆ†åˆç†
- âœ… ä»£ç ç¤ºä¾‹å®Œæ•´
- âœ… å‘½ä»¤å¯æ‰§è¡Œæ€§éªŒè¯é€šè¿‡

### å†…å®¹å‡†ç¡®æ€§ âœ…

- âœ… ç«¯å£é…ç½®æ­£ç¡®
- âœ… å®¹å™¨åç§°æ­£ç¡®
- âœ… å‘½ä»¤è·¯å¾„æ­£ç¡®
- âœ… API ç«¯ç‚¹æ­£ç¡®
- âœ… æ•°æ®åº“å‘½ä»¤æ­£ç¡®

### å®ç”¨æ€§ âœ…

- âœ… å¿«é€Ÿå¼€å§‹æŒ‡å—æ¸…æ™°
- âœ… æµ‹è¯•æµç¨‹å®Œæ•´
- âœ… é—®é¢˜æ’æŸ¥æŒ‡å—æœ‰ç”¨
- âœ… æµ‹è¯•æŠ¥å‘Šè¯´æ˜è¯¦ç»†

---

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### å·²è¦†ç›–çš„æµ‹è¯•ç±»å‹ âœ…

- âœ… å•å…ƒæµ‹è¯•
- âœ… é›†æˆæµ‹è¯•
- âœ… E2E æµ‹è¯•
- âœ… æ€§èƒ½æµ‹è¯•
- âœ… å®‰å…¨æµ‹è¯•
- âœ… è¾¹ç•Œæƒ…å†µæµ‹è¯•

### æµ‹è¯•è„šæœ¬å®Œæ•´æ€§ âœ…

- âœ… å¿«é€ŸéªŒè¯è„šæœ¬ (`quick-verify.sh`)
- âœ… ç»¼åˆæµ‹è¯•è„šæœ¬ (`comprehensive-test.sh`)
- âœ… ä¸šåŠ¡é€»è¾‘æµ‹è¯• (`test-business-logic.sh`)
- âœ… API ç«¯ç‚¹æµ‹è¯• (`test-api-endpoints.sh`)
- âœ… å®Œæ•´åŠŸèƒ½æµ‹è¯• (`test-full-features.sh`)
- âœ… E2E æµ‹è¯• (`test-e2e.sh`)

---

## âœ… æœ€ç»ˆç»“è®º

**æµ‹è¯•æŒ‡å—å®¡æŸ¥ç»“æœ**: âœ… **é€šè¿‡**

### ä¼˜ç‚¹

1. âœ… **ç»“æ„æ¸…æ™°**: æ–‡æ¡£ç»„ç»‡è‰¯å¥½ï¼Œæ˜“äºæŸ¥æ‰¾ä¿¡æ¯
2. âœ… **å†…å®¹å‡†ç¡®**: æ‰€æœ‰å‘½ä»¤ã€è·¯å¾„ã€ç«¯å£é…ç½®éƒ½æ­£ç¡®
3. âœ… **å®ç”¨æ€§å¼º**: æä¾›äº†å®Œæ•´çš„æµ‹è¯•æµç¨‹å’Œé—®é¢˜æ’æŸ¥æŒ‡å—
4. âœ… **è¦†ç›–å…¨é¢**: æ¶µç›–äº†ä»å¿«é€ŸéªŒè¯åˆ°å…¨é¢æµ‹è¯•çš„æ‰€æœ‰å±‚æ¬¡

### å·²ä¿®æ­£çš„é—®é¢˜

1. âœ… ç«¯å£è¯´æ˜å·²è¡¥å……
2. âœ… ç¯å¢ƒåŒºåˆ†å·²æ˜ç¡®
3. âœ… å¿«é€Ÿå¼€å§‹æŒ‡å—å·²å®Œå–„

### å»ºè®®ï¼ˆå¯é€‰ï¼‰

1. å¯ä»¥è€ƒè™‘æ·»åŠ æ›´å¤šç¯å¢ƒå˜é‡ç¤ºä¾‹
2. å¯ä»¥è€ƒè™‘æ·»åŠ æµ‹è¯•æ•°æ®å‡†å¤‡è„šæœ¬
3. å¯ä»¥è€ƒè™‘æ·»åŠ  CI/CD é›†æˆè¯´æ˜

---

**å®¡æŸ¥å®Œæˆæ—¶é—´**: 2026-02-06  
**å®¡æŸ¥çŠ¶æ€**: âœ… é€šè¿‡ï¼Œå·²ä¿®æ­£å…³é”®é—®é¢˜
