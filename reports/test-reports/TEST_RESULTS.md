# ğŸ§ª PIS é¡¹ç›®æµ‹è¯•ç»“æœæŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: 2026-02-06  
**æµ‹è¯•ç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒ

---

## ğŸ“Š æµ‹è¯•ç»“æœæ‘˜è¦

### âœ… é€šè¿‡é¡¹

1. **Docker å®¹å™¨çŠ¶æ€** âœ…
   - PostgreSQL: è¿è¡Œä¸­ (healthy) - `localhost:5432`
   - Redis: è¿è¡Œä¸­ (healthy) - `localhost:6379`
   - MinIO: è¿è¡Œä¸­ (healthy) - `localhost:9000/9001`

2. **æ•°æ®åº“è¿æ¥** âœ…
   - è¿æ¥æˆåŠŸ
   - æ•°æ®åº“è¡¨ç»“æ„æ­£å¸¸

3. **Redis è¿æ¥** âœ…
   - PING å“åº”æ­£å¸¸

### âš ï¸ éœ€è¦å…³æ³¨

1. **ä»£ç æ£€æŸ¥** âš ï¸
   - å‘ç° 1 ä¸ªé”™è¯¯: `src/lib/utils.ts:325` - ä½¿ç”¨äº† `require()` å¯¼å…¥
   - éœ€è¦ä¿®å¤: å°† `require()` æ”¹ä¸º ES6 `import`

2. **å¼€å‘æœåŠ¡å™¨** âš ï¸
   - æœªè¿è¡Œ
   - éœ€è¦å¯åŠ¨: `pnpm dev`

---

## ğŸ” è¯¦ç»†æµ‹è¯•ç»“æœ

### 1. ä»£ç æ£€æŸ¥

```bash
pnpm lint
```

**ç»“æœ**: âŒ å¤±è´¥

**é”™è¯¯**:
- `src/lib/utils.ts:325:22` - `require()` å¯¼å…¥è¢«ç¦æ­¢

**å»ºè®®**: ä¿®å¤æ­¤é”™è¯¯åé‡æ–°è¿è¡Œæµ‹è¯•

### 2. å®¹å™¨çŠ¶æ€æ£€æŸ¥

```bash
docker ps --filter "name=pis-"
```

**ç»“æœ**: âœ… é€šè¿‡

- âœ… pis-postgres-dev: Up (healthy)
- âœ… pis-redis-dev: Up (healthy)
- âœ… pis-minio-dev: Up (healthy)

### 3. æ•°æ®åº“è¿æ¥æµ‹è¯•

```bash
docker exec pis-postgres-dev psql -U pis -d pis -c "SELECT COUNT(*) FROM users;"
```

**ç»“æœ**: âœ… é€šè¿‡

- æ•°æ®åº“è¿æ¥æ­£å¸¸
- ç”¨æˆ·è¡¨å­˜åœ¨ï¼ˆå½“å‰ 0 ä¸ªç”¨æˆ·ï¼‰

### 4. Redis è¿æ¥æµ‹è¯•

```bash
docker exec pis-redis-dev redis-cli PING
```

**ç»“æœ**: âœ… é€šè¿‡

- è¿”å›: `PONG`

### 5. å¼€å‘æœåŠ¡å™¨æ£€æŸ¥

```bash
curl http://localhost:3000/api/health
```

**ç»“æœ**: âš ï¸ æœªè¿è¡Œ

- éœ€è¦å¯åŠ¨å¼€å‘æœåŠ¡å™¨: `pnpm dev`

---

## ğŸ“‹ ä¸‹ä¸€æ­¥æ“ä½œ

### ç«‹å³å¯ä»¥åšçš„

1. **ä¿®å¤ä»£ç é”™è¯¯**
   ```bash
   # ä¿®å¤ src/lib/utils.ts:325 çš„ require() å¯¼å…¥
   ```

2. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
   ```bash
   pnpm dev
   ```

3. **åˆå§‹åŒ–ç”¨æˆ·è´¦æˆ·**ï¼ˆå¦‚æœæ•°æ®åº“ä¸ºç©ºï¼‰
   ```bash
   pnpm init-users
   ```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨åå¯ä»¥è¿è¡Œ

1. **E2E æµ‹è¯•ï¼ˆå¯è§†åŒ–ï¼‰**
   ```bash
   pnpm test:e2e:ui
   ```

2. **ä¸šåŠ¡é€»è¾‘æµ‹è¯•**
   ```bash
   BASE_URL=http://localhost:3000 bash scripts/test/test-business-logic.sh
   ```

3. **API ç«¯ç‚¹æµ‹è¯•**
   ```bash
   BASE_URL=http://localhost:3000 bash scripts/test/test-api-endpoints.sh
   ```

---

## âœ… æµ‹è¯•é€šè¿‡æ ‡å‡†

### å½“å‰çŠ¶æ€

- âœ… åŸºç¡€æœåŠ¡: 3/3 é€šè¿‡
- âš ï¸ ä»£ç è´¨é‡: 1 ä¸ªé”™è¯¯éœ€è¦ä¿®å¤
- âš ï¸ åŠŸèƒ½æµ‹è¯•: ç­‰å¾…å¼€å‘æœåŠ¡å™¨å¯åŠ¨

### å®Œæˆæµ‹è¯•éœ€è¦

1. âœ… åŸºç¡€æœåŠ¡è¿è¡Œï¼ˆå·²å®Œæˆï¼‰
2. â­ï¸ ä¿®å¤ä»£ç é”™è¯¯
3. â­ï¸ å¯åŠ¨å¼€å‘æœåŠ¡å™¨
4. â­ï¸ è¿è¡ŒåŠŸèƒ½æµ‹è¯•

---

## ğŸ¯ å¿«é€Ÿå¼€å§‹

```bash
# 1. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆæ–°ç»ˆç«¯ï¼‰
pnpm dev

# 2. ç­‰å¾…æœåŠ¡å°±ç»ªåï¼ˆçº¦30ç§’ï¼‰ï¼Œè¿è¡Œæµ‹è¯•
pnpm test:e2e:ui
```

---

**æµ‹è¯•çŠ¶æ€**: ğŸŸ¡ è¿›è¡Œä¸­ï¼ˆåŸºç¡€ç¯å¢ƒå°±ç»ªï¼Œç­‰å¾…å¼€å‘æœåŠ¡å™¨å¯åŠ¨ï¼‰
